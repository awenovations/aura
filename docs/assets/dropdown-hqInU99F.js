import{t as g,a as y,b as re,c as Ee}from"./template-Dutn6tew.js";import{x as j,j as ie,y as ne,B as Y,Y as Pe,W as Se,p as Ve,z as K,A as Fe,t as w,a as Ie,s as q,g as l,c as k,d as L,f as De,m as O,b as E}from"./context-kYMOf6HF.js";import{o as Ne,l as se,p as v,i as We,g as P,h as S,a as Ue}from"./props-DrYEKqSu.js";import{a as Me,s as I}from"./slot-CgV10kGK.js";import{a as ze,b as R}from"./attributes-CJ5rmtxl.js";import{s as Ke}from"./class-Dzh9Da8g.js";import{s as Le}from"./style-CcY6orqc.js";import{b as le}from"./this-CAwuPZWO.js";import{c as Re}from"./index-client-D584fG04.js";import{c as Te}from"./attributes-Co-1QMVx.js";import{c as Be}from"./index-DUolvyrz.js";import{I as Ce}from"./icon-ByRCrE_1.js";import{F as He}from"./float-ChGK669O.js";import{F as je,v as Ye}from"./form-item-Vnm5Ebwr.js";function Ge(t,a,s){j(()=>{var o=ie(()=>a(t,s==null?void 0:s())||{});if(s&&(o!=null&&o.update)){var i=!1,d={};ne(()=>{var c=s();Y(c),i&&Pe(d,c)&&(d=c,o.update(c))}),i=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}function Je(t,a,s=a){var o=Se();Ne(t,"input",i=>{var d=i?t.defaultValue:t.value;if(d=T(t)?B(d):d,s(d),o&&d!==(d=a())){var c=t.selectionStart,V=t.selectionEnd;t.value=d??"",V!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(V,t.value.length))}}),ie(a)==null&&t.value&&s(T(t)?B(t.value):t.value),ne(()=>{var i=a();T(t)&&i===B(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function T(t){var a=t.type;return a==="number"||a==="range"}function B(t){return t===""?null:+t}function C(t){return function(...a){var s=a[0];return s.stopPropagation(),t==null?void 0:t.apply(this,a)}}function H(t,a){let s;const o=i=>{s&&document.removeEventListener("click",s),s=d=>{d.composedPath().includes(t)||i&&i(d)},document.addEventListener("click",s)};return o(a),{destroy(){document.removeEventListener("click",s)},update(i){o(i)}}}function Qe(t){return new Promise(a=>{if(document.querySelector(t))return a(document.querySelector(t));const s=new MutationObserver(()=>{document.querySelector(t)&&(s.disconnect(),a(document.querySelector(t)))});s.observe(document.body,{childList:!0,subtree:!0})})}var Xe=g('<label class="label"><!></label>'),Ze=g('<input type="hidden">'),$e=g('<button class="trigger svelte-11l0xny" type="button"><!> <!></button>'),et=g('<div role="menu" tabindex="-1" class="aura-menu svelte-11l0xny"><!></div>'),tt=g('<div class="errors-text svelte-11l0xny"><!></div>'),at=g("<div><div><!> <!> <!> <!></div> <!></div>");function rt(t,a){const s=Me(a),o=se(a,["children","$$slots","$$events","$$legacy"]),i=se(o,["id","isOpen","required","isFocused","showErrors","name","fullWidth","currentValue"]);Ve(a,!1);const d=O(),c=O(),V=Re();let G=v(a,"id",24,Ye),f=v(a,"isOpen",12,!1),D=v(a,"required",12,!1),F=v(a,"isFocused",12,!1),J=v(a,"showErrors",8,!1),Q=v(a,"name",8),oe=v(a,"fullWidth",8,!1),p=v(a,"currentValue",12),x=O(),m=O(),X=O(!1);const de=()=>{f(!f())},N=()=>{f(!1),F(!1)},ce=()=>{F(!0)},Z=e=>e.getAttribute("value")??e.value??e.textContent,ue=e=>{const r=l(c).find(n=>e.composedPath().includes(n));if(r.tagName==="AURA-OPTION"){const n=Z(r);o.currentValue||p(n),E(X,D()&&!p()),V("change",{value:n})}},fe=async e=>{f(!0),await Qe(".aura-menu"),W(e)},me=e=>{e.preventDefault();let r=l(m).querySelector("aura-option[aria-selected] + aura-option");r||(r=l(m).querySelector("aura-option:first-of-type")),r.click()},ye=e=>{e.preventDefault();let r=l(m).querySelector("aura-option:has( + aura-option[aria-selected])");r||(r=l(m).querySelector("aura-option:last-of-type")),r.click()},W=async e=>{e.code==="Escape"||e.code==="Tab"?N():!f()&&(e.code==="ArrowDown"||e.code==="ArrowUp")?await fe(e):e.code==="ArrowDown"?me(e):e.code==="ArrowUp"&&ye(e)},ve=e=>{ue(e),e.pointerId!==-1&&N()};K(()=>(Y(f()),l(x)),()=>{var e;E(d,f()!==void 0&&((e=l(x))==null?void 0:e.getBoundingClientRect().width)||0)}),K(()=>l(m),()=>{var e,r,n,u;E(c,Array.from(((n=(r=(e=l(m))==null?void 0:e.querySelector(".aura-menu slot"))==null?void 0:r.assignedElements())==null?void 0:n.filter(_=>["AURA-OPTION"].includes(_.tagName)))??((u=l(m))==null?void 0:u.querySelectorAll(".aura-menu > :is(aura-option)"))??[]))}),K(()=>(l(c),Y(p())),()=>{for(const e of l(c))e.setAttribute("tabindex","0"),e.tagName==="AURA-OPTION"&&(e.setAttribute("role","option"),p()===Z(e)?e.setAttribute("aria-selected",""):e.removeAttribute("aria-selected"))}),Fe(),We();var U=at(),b=k(U);let $;var ee=k(b);{var pe=e=>{var r=Xe(),n=k(r);I(n,a,"label",{},null),w(()=>R(r,"for",G())),y(e,r)};P(ee,e=>{s.label&&e(pe)})}var te=q(ee,2);{var be=e=>{var r=Ze();w(()=>R(r,"name",Q())),Je(r,p),y(e,r)};P(te,e=>{var r;((r=Q())==null?void 0:r.length)>0&&e(be)})}var ae=q(te,2);const _e=L(()=>f()||F()),he=L(()=>(s.errors||l(X))&&J());je(ae,{get showFocusOutline(){return l(_e)},get error(){return l(he)},get required(){return D()},set required(e){D(e)},children:(e,r)=>{var n=$e(),u=k(n);{var _=h=>{var A=re();w(()=>Ue(A,p())),y(h,A)},M=h=>{var A=Ee(),Ae=De(A);I(Ae,a,"placeholder",{},qe=>{var Oe=re("select...");y(qe,Oe)}),y(h,A)};P(u,h=>{p()?h(_):h(M,!1)})}var z=q(u,2);Ce(z,{name:"caret-down",size:"small"}),w(()=>R(n,"id",G())),S("focus",n,ce),y(e,n)},$$slots:{default:!0},$$legacy:!0});var we=q(ae,2);{var ke=e=>{He(e,{get target(){return l(x)},children:(r,n)=>{var u=et();let _;var M=k(u);I(M,a,"default",{},null),le(u,z=>E(m,z),()=>l(m)),w(()=>_=Le(u,"",_,{"--aura-menu-control-width":`${l(d)}px`})),S("keypress",u,W),S("click",u,C(ve)),y(r,u)},$$slots:{default:!0}})};P(we,e=>{f()&&e(ke)})}le(b,e=>E(x,e),()=>l(x)),Ge(b,(e,r)=>H==null?void 0:H(e,r),()=>(f()||F())&&N),j(()=>S("keydown",b,C(W))),j(()=>S("click",b,C(de)));var ge=q(b,2);{var xe=e=>{var r=tt(),n=k(r);I(n,a,"errors",{},null),y(e,r)};P(ge,e=>{J()&&e(xe)})}w(e=>{Ke(U,1,e,"svelte-11l0xny"),$=ze(b,$,{...i,class:"aura-dropdown",tabindex:"-1",role:"button"},"svelte-11l0xny")},[()=>Te(Be("aura-dropdown-wrapper",i.class,{fullWidth:oe()}))],L),y(t,U),Ie()}rt.__docgen={version:3,name:"dropdown.svelte",data:[{name:"id",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"isOpen",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"required",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"isFocused",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"showErrors",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"name",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"fullWidth",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"currentValue",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"change"}],slots:[{keywords:[],visibility:"public",description:"",name:"label"},{keywords:[],visibility:"public",description:"",name:"placeholder"},{keywords:[],visibility:"public",description:"",name:"default"},{keywords:[],visibility:"public",description:"",name:"errors"}],refs:[]};export{rt as D};
