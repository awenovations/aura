import{E as B,c as D,d as L}from"./template-C5pUc83R.js";import{h as S}from"./class-PipbczXD.js";import{e as U,h as X,g as C,r as H,i as N,j as F,I as w,k as R,l as T,o as G,q as J,u as K,v as O,w as P,d as Q,x as W,y as Y,z as M,A as Z}from"./context-BfhkX6rd.js";function ie(l,e){return e}function $(l,e,n,u){for(var d=[],s=e.length,v=0;v<s;v++)J(e[v].e,d,!0);var h=s>0&&d.length===0&&n!==null;if(h){var _=n.parentNode;K(_),_.append(n),u.clear(),E(l,e[0].prev,e[s-1].next)}O(d,()=>{for(var c=0;c<s;c++){var r=e[c];h||(u.delete(r.k),E(l,r.prev,r.next)),P(r.e,!h)}})}function fe(l,e,n,u,d,s=null){var v=l,h={flags:e,items:new Map,first:null};{var _=l;v=_.appendChild(U())}var c=null,r=!1,o=Q(()=>{var a=n();return W(a)?a:a==null?[]:R(a)});X(()=>{var a=C(o),t=a.length;r&&t===0||(r=t===0,j(a,h,v,d,e,u,n),s!==null&&(t===0?c?H(c):c=N(()=>s(v)):c!==null&&F(c,()=>{c=null})),C(o))})}function j(l,e,n,u,d,s,v){var h=l.length,_=e.items,c=e.first,r=c,o,a=null,t=[],i=[],y,x,f,p;for(p=0;p<h;p+=1){if(y=l[p],x=s(y,p),f=_.get(x),f===void 0){var q=r?r.e.nodes_start:n;a=re(q,e,a,a===null?e.first:a.next,y,x,p,u,d,v),_.set(x,a),t=[],i=[],r=a.next;continue}if(ee(f,y,p),f.e.f&w&&H(f.e),f!==r){if(o!==void 0&&o.has(f)){if(t.length<i.length){var m=i[0],g;a=m.prev;var A=t[0],I=t[t.length-1];for(g=0;g<t.length;g+=1)b(t[g],m,n);for(g=0;g<i.length;g+=1)o.delete(i[g]);E(e,A.prev,I.next),E(e,a,A),E(e,I,m),r=m,a=I,p-=1,t=[],i=[]}else o.delete(f),b(f,r,n),E(e,f.prev,f.next),E(e,f,a===null?e.first:a.next),E(e,a,f),a=f;continue}for(t=[],i=[];r!==null&&r.k!==x;)r.e.f&w||(o??(o=new Set)).add(r),i.push(r),r=r.next;if(r===null)continue;f=r}t.push(f),a=f,r=f.next}if(r!==null||o!==void 0){for(var k=o===void 0?[]:R(o);r!==null;)r.e.f&w||k.push(r),r=r.next;var V=k.length;if(V>0){var z=h===0?n:null;$(e,k,z,_)}}T.first=e.first&&e.first.e,T.last=a&&a.e}function ee(l,e,n,u){G(l.v,e),l.i=n}function re(l,e,n,u,d,s,v,h,_,c){var r=(_&D)!==0,o=(_&L)===0,a=r?o?Y(d):M(d):d,t=_&B?M(v):v,i={i:t,v:a,k:s,a:null,e:null,prev:n,next:u};try{return i.e=N(()=>h(l,a,t,c),S),i.e.prev=n&&n.e,i.e.next=u&&u.e,n===null?e.first=i:(n.next=i,n.e.next=i.e),u!==null&&(u.prev=i,u.e.prev=i.e),i}finally{}}function b(l,e,n){for(var u=l.next?l.next.e.nodes_start:n,d=e?e.e.nodes_start:n,s=l.e.nodes_start;s!==u;){var v=Z(s);d.before(s),s=v}}function E(l,e,n){e===null?l.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}export{fe as e,ie as i};
