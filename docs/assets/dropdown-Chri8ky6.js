import{a as v,b as k,t as ae,e as Ee}from"./template-B77arBy_.js";import{N as H,F as le,O as ie,R as Q,X as Pe,V as Se,p as Ve,P as R,Q as Fe,g as l,t as h,a as Ie,c as w,s as q,d as K,f as De,b as O,m as E}from"./context-CkYINwjE.js";import{o as Ne,l as re,p as y,i as Ue,g as P,h as S,a as We}from"./props-C038bvN8.js";import{a as Me,s as I}from"./slot-CgV10kGK.js";import{a as Re,b as L}from"./attributes-Dy7xLB0O.js";import{s as Ke}from"./class-PipbczXD.js";import{s as Le}from"./style-PwPRnE0L.js";import{b as se}from"./this-NneL_TJu.js";import{c as Te}from"./index-client-Nm16036z.js";import{c as ze}from"./attributes-Jce5emvo.js";import{c as Ce}from"./index-DUolvyrz.js";import{I as Be}from"./icon-bZl4R_WS.js";import{F as He}from"./float-DDu8gBtZ.js";import{v as Qe,F as Xe}from"./form-item-m9rlVyp9.js";function je(t,a,s){H(()=>{var o=le(()=>a(t,s==null?void 0:s())||{});if(o!=null&&o.update){var i=!1,d={};ie(()=>{var u=s();Q(u),i&&Pe(d,u)&&(d=u,o.update(u))}),i=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}function Ge(t,a,s=a){var o=Se();Ne(t,"input",i=>{var d=i?t.defaultValue:t.value;if(d=T(t)?z(d):d,s(d),o&&d!==(d=a())){var u=t.selectionStart,V=t.selectionEnd;t.value=d??"",V!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(V,t.value.length))}}),le(a)==null&&t.value&&s(T(t)?z(t.value):t.value),ie(()=>{var i=a();T(t)&&i===z(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function T(t){var a=t.type;return a==="number"||a==="range"}function z(t){return t===""?null:+t}function C(t){return function(...a){var s=a[0];return s.stopPropagation(),t==null?void 0:t.apply(this,a)}}function B(t,a){let s;const o=i=>{s&&document.removeEventListener("click",s),s=d=>{d.composedPath().includes(t)||i&&i(d)},document.addEventListener("click",s)};return o(a),{destroy(){document.removeEventListener("click",s)},update(i){o(i)}}}function Je(t){return new Promise(a=>{if(document.querySelector(t))return a(document.querySelector(t));const s=new MutationObserver(()=>{document.querySelector(t)&&(s.disconnect(),a(document.querySelector(t)))});s.observe(document.body,{childList:!0,subtree:!0})})}var Ye=k('<label class="label"><!></label>'),Ze=k('<input type="hidden">'),$e=k('<button class="trigger svelte-11l0xny" type="button"><!> <!></button>'),et=k('<div role="menu" tabindex="-1" class="aura-menu svelte-11l0xny"><!></div>'),tt=k('<div class="errors-text svelte-11l0xny"><!></div>'),at=k("<div><div><!> <!> <!> <!></div> <!></div>");function rt(t,a){const s=Me(a),o=re(a,["children","$$slots","$$events","$$legacy"]),i=re(o,["id","isOpen","required","isFocused","showErrors","name","fullWidth","currentValue"]);Ve(a,!1);const d=E(),u=E(),V=Te();let X=y(a,"id",24,Qe),f=y(a,"isOpen",12,!1),D=y(a,"required",12,!1),F=y(a,"isFocused",12,!1),j=y(a,"showErrors",8,!1),G=y(a,"name",8),ne=y(a,"fullWidth",8,!1),p=y(a,"currentValue",12),g=E(),m=E(),J=E(!1);const oe=()=>{f(!f())},N=()=>{f(!1),F(!1)},de=()=>{F(!0)},Y=e=>e.getAttribute("value")??e.value??e.textContent,ue=e=>{const r=l(u).find(n=>e.composedPath().includes(n));if(r.tagName==="AURA-OPTION"){const n=Y(r);o.currentValue||p(n),O(J,D()&&!p()),V("change",{value:n})}},ce=async e=>{f(!0),await Je(".aura-menu"),U(e)},fe=e=>{e.preventDefault();let r=l(m).querySelector("aura-option[aria-selected] + aura-option");r||(r=l(m).querySelector("aura-option:first-of-type")),r.click()},me=e=>{e.preventDefault();let r=l(m).querySelector("aura-option:has( + aura-option[aria-selected])");r||(r=l(m).querySelector("aura-option:last-of-type")),r.click()},U=async e=>{e.code==="Escape"||e.code==="Tab"?N():!f()&&(e.code==="ArrowDown"||e.code==="ArrowUp")?await ce(e):e.code==="ArrowDown"?fe(e):e.code==="ArrowUp"&&me(e)},ve=e=>{ue(e),e.pointerId!==-1&&N()};R(()=>(Q(f()),l(g)),()=>{var e;O(d,f()!==void 0&&((e=l(g))==null?void 0:e.getBoundingClientRect().width)||0)}),R(()=>l(m),()=>{var e,r,n,c;O(u,Array.from(((n=(r=(e=l(m))==null?void 0:e.querySelector(".aura-menu slot"))==null?void 0:r.assignedElements())==null?void 0:n.filter(x=>["AURA-OPTION"].includes(x.tagName)))??((c=l(m))==null?void 0:c.querySelectorAll(".aura-menu > :is(aura-option)"))??[]))}),R(()=>(l(u),Q(p())),()=>{for(const e of l(u))e.setAttribute("tabindex","0"),e.tagName==="AURA-OPTION"&&(e.setAttribute("role","option"),p()===Y(e)?e.setAttribute("aria-selected",""):e.removeAttribute("aria-selected"))}),Fe(),Ue();var W=at(),b=w(W);let Z;var $=w(b);{var ye=e=>{var r=Ye(),n=w(r);I(n,a,"label",{},null),h(()=>L(r,"for",X())),v(e,r)};P($,e=>{s.label&&e(ye)})}var ee=q($,2);{var pe=e=>{var r=Ze();h(()=>L(r,"name",G())),Ge(r,p),v(e,r)};P(ee,e=>{var r;((r=G())==null?void 0:r.length)>0&&e(pe)})}var te=q(ee,2);const be=K(()=>f()||F()),_e=K(()=>(s.errors||l(J))&&j());Xe(te,{get showFocusOutline(){return l(be)},get error(){return l(_e)},get required(){return D()},set required(e){D(e)},children:(e,r)=>{var n=$e(),c=w(n);{var x=_=>{var A=ae();h(()=>We(A,p())),v(_,A)},M=_=>{var A=Ee(),Ae=De(A);I(Ae,a,"placeholder",{},qe=>{var Oe=ae("select...");v(qe,Oe)}),v(_,A)};P(c,_=>{p()?_(x):_(M,!1)})}var xe=q(c,2);Be(xe,{name:"caret-down",size:"small"}),h(()=>L(n,"id",X())),S("focus",n,de),v(e,n)},$$slots:{default:!0},$$legacy:!0});var he=q(te,2);{var we=e=>{He(e,{get target(){return l(g)},children:(r,n)=>{var c=et(),x=w(c);I(x,a,"default",{},null),se(c,M=>O(m,M),()=>l(m)),h(()=>Le(c,"--aura-menu-control-width",`${l(d)}px`)),S("keypress",c,U),S("click",c,C(ve)),v(r,c)},$$slots:{default:!0}})};P(he,e=>{f()&&e(we)})}se(b,e=>O(g,e),()=>l(g)),je(b,(e,r)=>B==null?void 0:B(e,r),()=>(f()||F())&&N),H(()=>S("keydown",b,C(U))),H(()=>S("click",b,C(oe)));var ke=q(b,2);{var ge=e=>{var r=tt(),n=w(r);I(n,a,"errors",{},null),v(e,r)};P(ke,e=>{j()&&e(ge)})}h(e=>{Ke(W,ze(e),"svelte-11l0xny"),Z=Re(b,Z,{...i,class:"aura-dropdown",tabindex:"-1",role:"button"},"svelte-11l0xny")},[()=>Ce("aura-dropdown-wrapper",i.class,{fullWidth:ne()})],K),v(t,W),Ie()}rt.__docgen={version:3,name:"dropdown.svelte",data:[{name:"id",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"isOpen",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"required",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"isFocused",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"showErrors",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"name",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"fullWidth",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"currentValue",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"change"}],slots:[{keywords:[],visibility:"public",description:"",name:"label"},{keywords:[],visibility:"public",description:"",name:"placeholder"},{keywords:[],visibility:"public",description:"",name:"default"},{keywords:[],visibility:"public",description:"",name:"errors"}],refs:[]};export{rt as D};
