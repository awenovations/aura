import{t as g,a as y,b as re,c as Ee}from"./template-CpP-dHjg.js";import{k as j,j as ie,r as ne,v as X,Z as Pe,X as Se,p as Ve,o as L,q as Fe,t as k,a as Ie,s as A,g as l,c as w,d as R,f as De,m as O,b as E}from"./context-D5nTpIIo.js";import{o as Ne,l as se,p as v,i as Ue,b as P,e as S,a as We}from"./props-6Of600Nu.js";import{a as Me,s as I}from"./slot-CgV10kGK.js";import{a as Ke,b as T}from"./attributes-BTwVEwNN.js";import{s as Le}from"./class-Dzh9Da8g.js";import{s as Re}from"./style-CcY6orqc.js";import{b as le}from"./this-BtY6O8e7.js";import{c as Te}from"./index-client-Bg2Xcmq9.js";import{c as ze}from"./attributes-Co-1QMVx.js";import{c as Ce}from"./index-FGJkmGnF.js";import{I as Be}from"./icon-ChyfnH3H.js";import{F as He}from"./float-C67eQO9M.js";import{F as je,v as Xe}from"./form-item-CmGXL8a-.js";function Ze(t,a,s){j(()=>{var o=ie(()=>a(t,s==null?void 0:s())||{});if(s&&(o!=null&&o.update)){var i=!1,d={};ne(()=>{var c=s();X(c),i&&Pe(d,c)&&(d=c,o.update(c))}),i=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}function Ge(t,a,s=a){var o=Se();Ne(t,"input",i=>{var d=i?t.defaultValue:t.value;if(d=z(t)?C(d):d,s(d),o&&d!==(d=a())){var c=t.selectionStart,V=t.selectionEnd;t.value=d??"",V!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(V,t.value.length))}}),ie(a)==null&&t.value&&s(z(t)?C(t.value):t.value),ne(()=>{var i=a();z(t)&&i===C(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function z(t){var a=t.type;return a==="number"||a==="range"}function C(t){return t===""?null:+t}function B(t){return function(...a){var s=a[0];return s.stopPropagation(),t==null?void 0:t.apply(this,a)}}function H(t,a){let s;const o=i=>{s&&document.removeEventListener("click",s),s=d=>{d.composedPath().includes(t)||i&&i(d)},document.addEventListener("click",s)};return o(a),{destroy(){document.removeEventListener("click",s)},update(i){o(i)}}}function Je(t){return new Promise(a=>{if(document.querySelector(t))return a(document.querySelector(t));const s=new MutationObserver(()=>{document.querySelector(t)&&(s.disconnect(),a(document.querySelector(t)))});s.observe(document.body,{childList:!0,subtree:!0})})}var Qe=g('<label class="label"><!></label>'),Ye=g('<input type="hidden">'),$e=g('<button class="trigger svelte-11l0xny" type="button"><!> <!></button>'),et=g('<div role="menu" tabindex="-1" class="aura-menu svelte-11l0xny"><!></div>'),tt=g('<div class="errors-text svelte-11l0xny"><!></div>'),at=g("<div><div><!> <!> <!> <!></div> <!></div>");function rt(t,a){const s=Me(a),o=se(a,["children","$$slots","$$events","$$legacy"]),i=se(o,["id","isOpen","required","isFocused","showErrors","name","fullWidth","currentValue"]);Ve(a,!1);const d=O(),c=O(),V=Te();let Z=v(a,"id",24,Xe),f=v(a,"isOpen",12,!1),D=v(a,"required",12,!1),F=v(a,"isFocused",12,!1),G=v(a,"showErrors",8,!1),J=v(a,"name",8),oe=v(a,"fullWidth",8,!1),p=v(a,"currentValue",12),x=O(),m=O(),Q=O(!1);const de=()=>{f(!f())},N=()=>{f(!1),F(!1)},ce=()=>{F(!0)},Y=e=>e.getAttribute("value")??e.value??e.textContent,ue=e=>{const r=l(c).find(n=>e.composedPath().includes(n));if(r.tagName==="AURA-OPTION"){const n=Y(r);o.currentValue||p(n),E(Q,D()&&!p()),V("change",{value:n})}},fe=async e=>{f(!0),await Je(".aura-menu"),U(e)},me=e=>{e.preventDefault();let r=l(m).querySelector("aura-option[aria-selected] + aura-option");r||(r=l(m).querySelector("aura-option:first-of-type")),r.click()},ye=e=>{e.preventDefault();let r=l(m).querySelector("aura-option:has( + aura-option[aria-selected])");r||(r=l(m).querySelector("aura-option:last-of-type")),r.click()},U=async e=>{e.code==="Escape"||e.code==="Tab"?N():!f()&&(e.code==="ArrowDown"||e.code==="ArrowUp")?await fe(e):e.code==="ArrowDown"?me(e):e.code==="ArrowUp"&&ye(e)},ve=e=>{ue(e),e.pointerId!==-1&&N()};L(()=>(X(f()),l(x)),()=>{var e;E(d,f()!==void 0&&((e=l(x))==null?void 0:e.getBoundingClientRect().width)||0)}),L(()=>l(m),()=>{var e,r,n,u;E(c,Array.from(((n=(r=(e=l(m))==null?void 0:e.querySelector(".aura-menu slot"))==null?void 0:r.assignedElements())==null?void 0:n.filter(_=>["AURA-OPTION"].includes(_.tagName)))??((u=l(m))==null?void 0:u.querySelectorAll(".aura-menu > :is(aura-option)"))??[]))}),L(()=>(l(c),X(p())),()=>{for(const e of l(c))e.setAttribute("tabindex","0"),e.tagName==="AURA-OPTION"&&(e.setAttribute("role","option"),p()===Y(e)?e.setAttribute("aria-selected",""):e.removeAttribute("aria-selected"))}),Fe(),Ue();var W=at(),b=w(W);let $;var ee=w(b);{var pe=e=>{var r=Qe(),n=w(r);I(n,a,"label",{},null),k(()=>T(r,"for",Z())),y(e,r)};P(ee,e=>{s.label&&e(pe)})}var te=A(ee,2);{var be=e=>{var r=Ye();k(()=>T(r,"name",J())),Ge(r,p),y(e,r)};P(te,e=>{var r;((r=J())==null?void 0:r.length)>0&&e(be)})}var ae=A(te,2);const _e=R(()=>f()||F()),he=R(()=>(s.errors||l(Q))&&G());je(ae,{get showFocusOutline(){return l(_e)},get error(){return l(he)},get required(){return D()},set required(e){D(e)},children:(e,r)=>{var n=$e(),u=w(n);{var _=h=>{var q=re();k(()=>We(q,p())),y(h,q)},M=h=>{var q=Ee(),qe=De(q);I(qe,a,"placeholder",{},Ae=>{var Oe=re("select...");y(Ae,Oe)}),y(h,q)};P(u,h=>{p()?h(_):h(M,!1)})}var K=A(u,2);Be(K,{name:"caret-down",size:"small"}),k(()=>T(n,"id",Z())),S("focus",n,ce),y(e,n)},$$slots:{default:!0},$$legacy:!0});var ke=A(ae,2);{var we=e=>{He(e,{get target(){return l(x)},children:(r,n)=>{var u=et();let _;var M=w(u);I(M,a,"default",{},null),le(u,K=>E(m,K),()=>l(m)),k(()=>_=Re(u,"",_,{"--aura-menu-control-width":`${l(d)}px`})),S("keypress",u,U),S("click",u,B(ve)),y(r,u)},$$slots:{default:!0}})};P(ke,e=>{f()&&e(we)})}le(b,e=>E(x,e),()=>l(x)),Ze(b,(e,r)=>H==null?void 0:H(e,r),()=>(f()||F())&&N),j(()=>S("keydown",b,B(U))),j(()=>S("click",b,B(de)));var ge=A(b,2);{var xe=e=>{var r=tt(),n=w(r);I(n,a,"errors",{},null),y(e,r)};P(ge,e=>{G()&&e(xe)})}k(e=>{Le(W,1,e,"svelte-11l0xny"),$=Ke(b,$,{...i,class:"aura-dropdown",tabindex:"-1",role:"button"},"svelte-11l0xny")},[()=>ze(Ce("aura-dropdown-wrapper",i.class,{fullWidth:oe()}))],R),y(t,W),Ie()}rt.__docgen={version:3,name:"dropdown.svelte",data:[{name:"id",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"isOpen",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"required",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"isFocused",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"showErrors",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"name",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"fullWidth",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"currentValue",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"change"}],slots:[{keywords:[],visibility:"public",description:"",name:"label"},{keywords:[],visibility:"public",description:"",name:"placeholder"},{keywords:[],visibility:"public",description:"",name:"default"},{keywords:[],visibility:"public",description:"",name:"errors"}],refs:[]};export{rt as D};
